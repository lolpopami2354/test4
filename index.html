<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Bubba's Gramama</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-mid: #0b0c2a;
      --accent: #00ffff;
      --panel: #1a1a3d;
      --muted: #cfc6ff;
    }

    /* --- Base --- */
    html,body{height:100%;margin:0;padding:0;background:
      radial-gradient(ellipse at center,var(--bg-mid) 0%,#000 100%),
      linear-gradient(180deg, rgba(255,255,255,0.02) 0, transparent 100%);
      color:#fff;font-family:'Segoe UI',system-ui,-apple-system,"Orbitron",sans-serif;overflow-x:hidden;}

    .container{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;padding:40px 20px;max-width:1200px;margin:0 auto;}
    h1.site-title{margin:10px 0 6px;font-size:2rem;color:var(--accent);text-shadow:0 0 12px rgba(0,255,255,0.14),0 6px 30px rgba(0,0,0,0.6);letter-spacing:1px;}

    /* --- Coin/shop UI --- */
    .coin-container{position:fixed;top:20px;right:20px;z-index:6;display:flex;align-items:center;gap:10px}
    #coinDisplay{font-size:18px;background:rgba(0,255,255,0.08);padding:6px 12px;border-radius:8px;color:var(--accent);font-family:'Orbitron';box-shadow:0 0 10px rgba(0,255,255,0.06)}
    #shopToggle,#dailyRewardBtn,#leaderboardToggle{padding:6px 12px;border-radius:8px;border:none;background:rgba(0,255,255,0.18);cursor:pointer;font-family:'Orbitron';transition:.2s}

    /* --- Panels --- */
    .shop-panel,.leaderboard-panel{position:fixed;background:rgba(5,5,20,0.95);border:1px solid rgba(0,255,255,0.18);border-radius:12px;padding:16px;display:none;flex-direction:column;gap:12px;box-shadow:0 10px 40px rgba(0,255,255,0.06);z-index:7;width:240px;animation:dropdown .28s ease}
    .shop-panel{top:70px;right:20px}
    .leaderboard-panel{top:70px;right:280px}

    @keyframes dropdown{from{transform:translateY(-12px);opacity:0}to{transform:translateY(0);opacity:1}}

    .shop-item{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-family:'Orbitron'}
    .buy-button{background:linear-gradient(90deg,#00ffff,#008080);border:2px solid #00ffff;padding:8px 14px;border-radius:8px;font-weight:700;cursor:pointer;box-shadow:0 0 6px #00ffff;transition:all .18s;font-family:'Orbitron'}
    .buy-button:hover{transform:scale(1.06)}
    .buy-button.owned{background:linear-gradient(90deg,#ff4444,#cc0000);border-color:#ff4444;color:#fff;cursor:not-allowed;box-shadow:0 0 8px #ff4444}

    /* --- Leaderboard close button (neon pulse) --- */
    @keyframes pulseGlow{0%,100%{box-shadow:0 0 10px rgba(255,0,0,0.35),0 0 20px rgba(255,0,0,0.25)}50%{box-shadow:0 0 22px rgba(255,0,0,0.6),0 0 36px rgba(255,0,0,0.45)}}
    .leaderboard-panel .close-btn{margin-top:8px;padding:10px 16px;border-radius:8px;border:none;background:linear-gradient(180deg,#ff4444,#cc0000);color:#fff;font-family:'Orbitron';cursor:pointer;animation:pulseGlow 2s infinite}
    .leaderboard-panel .close-btn:hover{transform:translateY(-2px) scale(1.04)}

    /* --- Games --- */
    .game-block{width:100%;display:flex;align-items:center;justify-content:space-between;gap:20px;padding:12px 16px;margin-bottom:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.005));border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 18px rgba(0,0,0,0.45)}
    .game-block h2{margin:0;font-size:1.05rem;color:var(--muted)}
    .game-block button.play-btn{padding:10px 16px;border-radius:10px;border:none;background:linear-gradient(180deg,var(--accent),#00cfcf);cursor:pointer;font-family:'Orbitron'}

    #backButton{position:fixed;top:20px;left:20px;padding:10px 18px;border-radius:8px;border:none;background:rgba(85,85,85,0.9);color:#fff;display:none;z-index:6}

    iframe{width:1200px;max-width:100%;height:600px;border-radius:10px;border:2px solid rgba(255,255,255,0.06);box-shadow:0 10px 50px rgba(0,0,0,0.7);display:none;margin-top:20px;z-index:2}

    /* --- Access panel --- */
    .access-panel{width:100%;max-width:760px;margin:18px 0;padding:16px;border-radius:12px;background:linear-gradient(180deg,rgba(10,12,30,0.6),rgba(14,10,30,0.35));border:1px solid rgba(0,255,255,0.06);display:flex;flex-direction:column;align-items:center;gap:12px}
    .code-row{display:flex;gap:12px;width:100%;justify-content:center;align-items:center}
    #codeInput{flex:1;padding:12px 14px;border-radius:8px;border:none;background:var(--panel);color:var(--accent);font-family:'Orbitron';text-align:center}
    .submit-btn{padding:10px 14px;border-radius:8px;border:none;background:linear-gradient(180deg,var(--accent),#00cfcf);cursor:pointer;font-family:'Orbitron'}

    /* --- Stars & shooting star styles --- */
    .stars, .stars2, .nebula { position:fixed; top:0; left:0; width:200%; height:200%; pointer-events:none; z-index:0; transform:translate(-25%,-25%); mix-blend-mode:screen; }
    .stars::after{ content:""; position:absolute; width:2px;height:2px;background:white;
      box-shadow: 50px 100px white, 200px 300px white, 400px 150px white, 600px 250px white, 800px 100px white, 1000px 200px white, 1200px 50px white, 1400px 350px white, 1600px 220px white, 1800px 120px white;
      animation:twinkle 2.5s infinite ease-in-out;
    }
    .stars2::after{ content:""; position:absolute; width:1px;height:1px;background:#aaf0ff;
      box-shadow: 120px 80px #aaf0ff, 320px 240px #aaf0ff, 720px 150px #aaf0ff, 920px 450px #aaf0ff, 1320px 100px #aaf0ff, 1720px 300px #aaf0ff;
      opacity:0.6; animation:twinkle2 3.5s infinite ease-in-out;
    }
    @keyframes twinkle{0%,100%{opacity:0.9}50%{opacity:0.3}}
    @keyframes twinkle2{0%,100%{opacity:0.6}50%{opacity:0.2}}

    .nebula { background:
      radial-gradient(600px 300px at 10% 10%, rgba(0,200,255,0.06), transparent 10%),
      radial-gradient(500px 260px at 80% 70%, rgba(180,0,255,0.04), transparent 8%);
      opacity:0.9; mix-blend-mode:overlay; z-index:0; pointer-events:none; }

    /* shooting star base (clones will be absolute) */
    .shooting-star { position:absolute; pointer-events:none; z-index:0; border-radius:2px; background:linear-gradient(-45deg, rgba(255,255,255,1), rgba(255,255,255,0.15)); opacity:0; }

    /* responsive */
    @media(max-width:820px){ iframe{height:80vh} .game-block{flex-direction:column;align-items:stretch} .code-row{flex-direction:column} .leaderboard-panel{right:20px;top:140px} }
  </style>
</head>
<body>
  <!-- STAR LAYERS -->
  <div class="stars"></div>
  <div class="stars2"></div>
  <div class="nebula"></div>

  <!-- UI -->
  <div class="coin-container">
    <button id="dailyRewardBtn" onclick="claimDailyReward()">üéÅ Daily Reward</button>
    <button id="leaderboardToggle" onclick="toggleLeaderboard()">üèÜ Leaderboard</button>
    <span id="coinDisplay">ü™ô 0</span>
    <button id="shopToggle" onclick="toggleShop()">üõí Shop</button>
  </div>

  <div class="shop-panel" id="shopPanel" aria-hidden="true">
    <h3>Game Shop</h3>
    <div class="shop-item">
      <span>Drive Mad</span>
      <button class="buy-button" data-game="drivemad" data-cost="300" onclick="buyGame('drivemad',300)">Buy - 300ü™ô</button>
    </div>
    <div class="shop-item">
      <span>Hide and Smash</span>
      <button class="buy-button" data-game="hideandsmash" data-cost="200" onclick="buyGame('hideandsmash',200)">Buy - 200ü™ô</button>
    </div>
  </div>

  <div class="leaderboard-panel" id="leaderboardPanel" aria-hidden="true">
    <h3>üèÜ Top Coin Holders</h3>
    <div id="leaderboardList" style="max-height:260px;overflow:auto;"></div>
    <button class="close-btn" onclick="closeLeaderboard()">Close</button>
  </div>

  <button id="backButton" onclick="goBack()">‚¨Ö Back</button>

  <div class="container">
    <h1 class="site-title">WELCOME to Bubba's Gramama</h1>
    <img class="gif" src="https://media1.tenor.com/m/0IixRqy4QoEAAAAC/a-fart-fart.gif" alt="Funny gif" style="max-width:90%;border-radius:12px;box-shadow:0 8px 40px rgba(0,0,0,.6)">

    <div class="access-panel" aria-label="Galactic access panel">
      <h3>Enter Access Code</h3>
      <div class="code-row">
        <input id="codeInput" type="text" inputmode="numeric" pattern="[0-9]*" placeholder="‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢" aria-label="Access code">
        <button class="submit-btn" onclick="checkCode()">Submit</button>
      </div>
      <button id="unlockButton" style="display:none;" onclick="launchGame('secret')">üöÄ Launch Sequence Activated</button>
    </div>

    <!-- Full game list -->
    <div class="game-block"><h2>Hide and Smash</h2><button class="play-btn" onclick="launchGame('hideandsmash')">Play Hide and Smash</button></div>
    <div class="game-block"><h2>Pixle Gun 3d</h2><button class="play-btn" onclick="launchGame('pixelgun')">Play Pixle Gun 3d</button></div>
    <div class="game-block"><h2>Idle Breakout</h2><button class="play-btn" onclick="launchGame('idle-breakout')">Play Idle Breakout</button></div>
    <div class="game-block"><h2>Crossy Road</h2><button class="play-btn" onclick="launchGame('crossyroad')">Play Crossy Road</button></div>
    <div class="game-block"><h2>Slope</h2><button class="play-btn" onclick="launchGame('slope')">Play Slope</button></div>
    <div class="game-block"><h2>Bit Life</h2><button class="play-btn" onclick="launchGame('bitlife')">Play Bit Life</button></div>
    <div class="game-block"><h2>Subway Surfers</h2><button class="play-btn" onclick="launchGame('subway-surfers')">Play Subway Surfers</button></div>
    <div class="game-block"><h2>Stickman Golf</h2><button class="play-btn" onclick="launchGame('stickman-golf')">Play Stickman Golf</button></div>
    <div class="game-block"><h2>Basketball Random</h2><button class="play-btn" onclick="launchGame('basketball-random')">Play Basketball Random</button></div>
    <div class="game-block"><h2>Minecraft</h2><button class="play-btn" onclick="launchGame('minecraft')">Play Minecraft</button></div>
    <div class="game-block"><h2>DRIFT HUNTERS</h2><button class="play-btn" onclick="launchGame('drifthunters')">Play Drift Hunters</button></div>
    <div class="game-block"><h2>Drive Mad!</h2><button class="play-btn" onclick="launchGame('drivemad')">Play Drive Mad</button></div>
    <div class="game-block"><h2>Opposite Day</h2><button class="play-btn" onclick="launchGame('oppositeday')">Don't play Opposite Day</button></div>
    <div class="game-block"><h2>‚ùÑÔ∏è Snow Rider 3D</h2><button class="play-btn" onclick="launchGame('snowrider')">Play Snow Rider 3D</button></div>

    <iframe id="gameFrame" src="" allowfullscreen></iframe>
  </div>

  <script>
    // --- URLs ---
    const gameURLs = {
      'hideandsmash': "https://gibbat2.github.io/Games/games/hideandsmash/",
      'pixelgun': "https://gibbat2.github.io/Games/games/pixelgun/",
      'idle-breakout': "https://gibbat2.github.io/Games/games/idle-breakout/",
      'crossyroad': "https://gibbat2.github.io/Games/games/crossyroad/",
      'slope': "https://gibbat2.github.io/Games/games/slope/",
      'bitlife': "https://gibbat2.github.io/Games/games/bitlife/",
      'subway-surfers': "https://gibbat2.github.io/Games/games/subway-surfers/",
      'stickman-golf': "https://gibbat2.github.io/Games/games/stickman-golf/",
      'basketball-random': "https://gibbat2.github.io/Games/games/basketball-random/",
      'minecraft': "https://daniezonmc.github.io/1.20/",
      'drifthunters': "https://gibbat2.github.io/Games/games/drifthunters/",
      'drivemad': "https://gibbat2.github.io/Games/games/drivemad/",
      'oppositeday': "https://www.hoodamath.com/games/oppositeday.html",
      'snowrider': "https://www.hoodamath.com/games/snowrider3d.html",
      'secret': "https://helios-blue.vercel.app/?sca_esv=fe0ebb4ec3b321c8&ie=ISO-8859-1&q=hello"
    };

    // --- state --- 
    let coins = parseInt(localStorage.getItem('coins') || '0', 10);
    let ownedGames = JSON.parse(localStorage.getItem('ownedGames') || '{}');

    // --- helpers ---
    function saveData(){
      localStorage.setItem('coins', String(coins));
      localStorage.setItem('ownedGames', JSON.stringify(ownedGames));
    }

    function updateCoinDisplay(){
      document.getElementById('coinDisplay').textContent = `ü™ô ${coins}`;
    }

    function updateShopButtons(){
      document.querySelectorAll('.buy-button').forEach(btn=>{
        const gid = btn.dataset.game;
        if (gid && ownedGames[gid]) {
          btn.classList.add('owned');
          btn.textContent = 'Owned';
          btn.disabled = true;
        } else {
          // restore text from dataset if present
          const cost = btn.dataset.cost || '';
          btn.classList.remove('owned');
          btn.disabled = false;
          btn.textContent = cost ? `Buy - ${cost}ü™ô` : 'Buy';
        }
      });
    }

    // --- initial UI setup ---
    updateCoinDisplay();
    updateShopButtons();

    // give 250 coins after 60s for visiting (non-blocking)
    setTimeout(()=>{ coins += 250; saveData(); updateCoinDisplay(); if (document.visibilityState !== 'hidden') { alert("You earned 250 ü™ô for visiting!"); } }, 60000);

    // --- shop ---
    function toggleShop(){
      const p = document.getElementById('shopPanel');
      p.style.display = (p.style.display === 'flex') ? 'none' : 'flex';
      p.setAttribute('aria-hidden', p.style.display === 'none');
    }

    function buyGame(gameId, cost){
      if (ownedGames[gameId]) { alert("You already own this game."); return; }
      if (coins >= cost) {
        coins -= cost;
        ownedGames[gameId] = true;
        saveData();
        updateCoinDisplay();
        updateShopButtons();
        alert(`You bought ${gameId} üéÆ!`);
      } else {
        alert("Not enough coins!");
      }
    }

    // --- launch / iframe ---
    function launchGame(id){
      // if some shop-protected games, require ownership
      const shopProtected = ['drivemad','hideandsmash'];
      if (shopProtected.includes(id) && !ownedGames[id]) {
        alert("You need to buy this game first üõí");
        return;
      }
      const src = gameURLs[id];
      if (!src) { console.warn('Missing url for', id); return; }
      const iframe = document.getElementById('gameFrame');
      iframe.src = src;
      iframe.style.display = 'block';
      document.getElementById('backButton').style.display = 'inline-block';
      window.scrollTo({ top: iframe.offsetTop - 20, behavior: 'smooth' });
    }

    function goBack(){
      const iframe = document.getElementById('gameFrame');
      iframe.style.display = 'none';
      iframe.src = '';
      document.getElementById('backButton').style.display = 'none';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // --- daily reward ---
    function claimDailyReward(){
      const today = new Date().toDateString();
      const last = localStorage.getItem('lastDailyClaim');
      if (last === today) { alert("You already claimed today's reward! Come back tomorrow."); return; }
      coins += 250;
      saveData();
      updateCoinDisplay();
      localStorage.setItem('lastDailyClaim', today);
      alert("üéÅ You received 250ü™ô for your daily visit!");
    }

    // --- leaderboard ---
    function toggleLeaderboard(){
      const p = document.getElementById('leaderboardPanel');
      if (p.style.display === 'flex') { p.style.display = 'none'; p.setAttribute('aria-hidden','true'); }
      else { updateLeaderboard(); p.style.display = 'flex'; p.setAttribute('aria-hidden','false'); }
    }
    function closeLeaderboard(){ const p = document.getElementById('leaderboardPanel'); p.style.display='none'; p.setAttribute('aria-hidden','true'); }
    function updateLeaderboard(){
      let board = JSON.parse(localStorage.getItem('leaderboard') || '[]');
      const name = localStorage.getItem('playerName') || (prompt("Enter your name for the leaderboard:") || "Guest");
      localStorage.setItem('playerName', name);
      const existing = board.find(p => p.name === name);
      if (existing) existing.coins = coins;
      else board.push({ name, coins });
      board.sort((a,b) => b.coins - a.coins);
      localStorage.setItem('leaderboard', JSON.stringify(board));
      const list = document.getElementById('leaderboardList');
      list.innerHTML = board.slice(0,10).map((p,i) => `<div>${i+1}. ${p.name} ‚Äî ${p.coins}ü™ô</div>`).join('');
    }

    // --- access code ---
    function checkCode(){
      const input = document.getElementById('codeInput').value.trim();
      const btn = document.getElementById('unlockButton');
      if (input === '2354') {
        btn.style.display = 'inline-block';
        // small pop animation
        btn.animate([{ transform: 'scale(.96)' }, { transform: 'scale(1)' }], { duration: 220, easing: 'ease-out' });
        // hide after 10s
        clearTimeout(window._unlockHideTimeout);
        window._unlockHideTimeout = setTimeout(()=>{ btn.style.display = 'none'; }, 10000);
      } else {
        btn.style.display = 'none';
        const el = document.getElementById('codeInput');
        el.animate([{ transform: 'translateX(0)' }, { transform: 'translateX(-8px)' }, { transform: 'translateX(8px)' }, { transform: 'translateX(0)' }], { duration: 260, iterations: 1 });
      }
    }

    // keyboard enter on code input
    document.getElementById('codeInput').addEventListener('keydown', function(e){
      if (e.key === 'Enter') { e.preventDefault(); checkCode(); }
    });

    // --- shooting stars (cloned, independent) ---
    function spawnShootingStar(){
      const star = document.createElement('div');
      star.className = 'shooting-star';
      // random size / length
      const length = Math.random() * 120 + 40; // px
      const thickness = Math.random() * 2 + 1; // px
      star.style.width = `${thickness}px`;
      star.style.height = `${length}px`;
      // random start position (from upper area, left-to-right)
      const startX = Math.random() * (window.innerWidth * 0.9) + window.innerWidth * 0.05;
      const startY = Math.random() * (window.innerHeight * 0.4) + window.innerHeight * 0.02;
      star.style.left = `${startX}px`;
      star.style.top = `${startY}px`;
      star.style.opacity = '1';
      star.style.transform = `rotate(${Math.random() * 40 - 20}deg)`;
      document.body.appendChild(star);

      const dx = (Math.random() * 600) + 200; // move right a bit (streak)
      const dy = (Math.random() * 200) + 50; // move down
      const angleDelta = Math.random() * 20 + 10;
      const duration = Math.random() * 800 + 900; // ms

      const anim = star.animate([
        { transform: `translate(0px,0px) rotate(${0}deg)`, opacity: 1 },
        { transform: `translate(${dx}px,${dy}px) rotate(${angleDelta}deg)`, opacity: 0 }
      ], { duration: duration, easing: 'cubic-bezier(.2,.8,.2,1)' });

      anim.onfinish = () => { star.remove(); };
    }

    function shootingStarLoop(){
      spawnShootingStar();
      // next star between 0.8s and 6s
      setTimeout(shootingStarLoop, Math.random() * 5200 + 800);
    }
    // start loop after page load
    setTimeout(shootingStarLoop, 1200);

    // Make sure shop buttons reflect ownership when page loads
    updateShopButtons();

    // Expose some functions for debugging in console
    window._BG = { spawnShootingStar, updateShopButtons, launchGame, claimDailyReward };

  </script>
</body>
</html>
